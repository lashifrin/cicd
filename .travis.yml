language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
sudo: required
services:
- docker
notifications:
  email:
  - lashifrin@gmail.com
  on_success: always
  on_failure: always
branches:
  only:
  - master
before_install:
- gem install travis -v 1.8.5 --no-rdoc --no-ri
- sudo curl -k -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- export BUILD_NAME=gs-spring-boot-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
script:
- sh travis_scripts/tag_build.sh
- sh travis_scripts/build_deploy_to_docker_hub.sh
- sh travis_scripts/deploy_to_amazon_ecs.sh
env:
  global:
  - secure: D+Et5CXJYZDc6sEq5+aAYahw8kUmqwGq61y1R1Mjuoa1LqRzL41u9Vn3lZ6qpec1vWBMXbWlgwpProOpon+afefIwfB8+xS2flbvlYsLcrIyi1qSgPF2zqfBkEKo/azdcbdQ0Cm3EEMXQE7wnX8Dg4EmmP4AHZbi0wetwTH4cbLJksDJcSzQ3NY7UrWIEpXnGOjrhKhvCn4onK3bpsotyTPrf7Y6BrVGaWhcXj/yWdZV1zSRZPVOnShynl4cDJkQDFZWLEoea29qaQr+SQSxyc0Jr7lBOUML8YN578ddOJlzBh6Df+F6TAu9SYHm+yuEyAfLXKycHBIZcdTyg5nOA95Jzs1uyuuMia1j7DF0o1GVfqcWIfYyiarqfb/a+siiquen186U2f2HdH+Rxsz57k1RT+VVX0fY6iuHWXg0H2ZwT+qTGqnKgDRiQSjFolMW2DGhbN01JFzyiOGhEMIwEOPGiO6uqmAugxK1SzznRAUikoOTMynfDbzzZ+ovzwTroNN20m9BeJKiBNk8whpwfm7qd0q8oErL7XGNvhYcTBHM0GIxBH2sS8AsWSP/gGaSYahNZWaMEcF5Q3Y9+Tu3p/9JgJnOaTexpuLGsuKN9BTv1rOfS5GWbdFtekVq0FmxWaFDcd3kGT+sYVHi9FlL9AFhVsrSFnA8CgzVeg8vHSQ=
  - secure: DKvsa0pz4EqyUnndM8nzQQ2P+5VxNfzrwNJodRYO/HXx/XiQ5fBqP3Q64RFOe9d6x2pualHg2NvD+4tDd4Qx8AOfL/yPVagkjZKSAYzKTo6RWN6X2kE1Gq09HDQoIgM2CABG9yo77fBfrhVrtn9nlXuDudXgpMkZygYCywRzZweRBK7982+oes5L94nEH9ysPCrG7WRsXZerLgM9CqBonIhcryopRHTNedvUitBNs4Q5R77haWFNJ6kEeHyadYB2c6wn6ucVe8lXtPr1XK3HJa+aDxhLqTW5MLyqiP8BysUS9ojp1NF1sYDtIDtCL3Z7+77QlX0Bkmou4zXrlQS9HcNo6tFCv0dk4lavbOjo0ykBmFxNurWWDiNcMQBSicYFFhijfJbY5rxTFMVmVQBvYIXLjVSaMTJeWlslej9Scart5fzVbf848QlK5UiE4TBJ1RTMPtZYyNJCFEwIFHH3h3PXH1RE2Z4XQzCkHoZn5XaUYYMOb9Az9Gnq9WCSIxq9cQQmjbXxmw+sD+g+mxmJI0vbElUX8hZI6y5WI/OUSFcQDXnGxIcNOd2bCP5tUoGOgZviryaO2rLNUWQ3b29fXNFeKMpdDDYN8MYGOqIYt+stqx7orEfCuuS42WJgw6Jf8TIG1mjBFx7d9b7UKGyZlqI3TN3rdhWJtERkN0M2qf8=
  - secure: Bb/xhUJB7N7FxHl2z6nKzN5HDz8KPx05oNl2/rCi8iNyYG/dAqxHe+XR7XjT2i4od9Uq9lmoH9MCwBAMRn0ra/HdRqyMC2yHd7IQnG4OFldkh7F2zt0fZro9jCLCLZkEM/sMac+Lt+SRqEUJll0nnpauyi1O+qLBw1YCsPlal+sqBXvIaYUwFIubx21PmKoWXBsXLH239AqKyxFRazIwuL61elJ0/V1a0/SzzxjBfYxO3+EPK6Jhgx+50y30UeoXtSx1I2PMaJooA89iUB0sjuxp5/2PrFJm/47y1Gcnihx3Ovmm7Mbg9Hk70ItcMbXtyC9Ow+sKZuKuxoeWehhgHRqp7kBie+4OIzJIm+zYG5GVzUmf5smTJXXIM9O9gfff9UdDyxVx94LPW7mdUQG+OsyWUlhAmnIwdWtVteWgnaoc0w8nxUFobAEEArtMVOyVgeBlxGU78ecjpvB3GrO4TSkdHWLpYf/EsXyLhXCGTOKAndyl98PMjPdjZWcgFR/SxSDe/kvCR1Cfg+PtQidL/j5cgLblxpJplDMF3xQ+eEqNHy1wtVpgeWsu1rOI2z8yjGfnQhwOVh2RXWi3Y4noxvH7Joaw6T3kbkwl72DE3ExltgRVStSjYJkRzlr4sH3jADwq0c0cakkTj+PN5pcZ48kfNTjWT/g3ZPrr9L/8ojw=
  - secure: HYAa+kmQEft0hYqCCEXLiGiRuzE/drWlJWEyBUghq7dujo6CJu2bsC4i23Lp38fjF004O7zD8zSPo6vI/NaIY8pfrxSZ2Oc/Gtv4kvAy73x5yJDoZUsRZQVdMOty9WVb+5d2S4XhkYknaESYxkwfPvxyxQWos3xS170TrChGHyN4aFa/4iA4ej5nstlxRD6zqes4xRi833fcSP3yBXU7ntTkgO5RuteoCZyrEY6JUURVSDS1CAAxPJ/wlvgu4CKQQsPQcjf4F4VHr4b6LvObj6rYT+hPLLFXb10/GSQuxa0J4Bt4HjfU3KwWlNNOKf9/svi+xvUwk2fsHALi+swINMIU0JQ1r6JlGeXK+26tiGDhnKOxc7CweK3VEEyoJ5TL6gjgS9cA4aC0zcilIlHut4Cu96zH+IZP5tXfQRP7FFaQj+s4U9uTV3uWJBIdmgYeUWTXLZdeYZW3ET6j9xEiUO0yEWHzwZUwLRwQlIfNFvdjSlRsjAZF1nInxGch+YlCZz3AsbSSHBUnIgAp/hAKFQA5jCVrjcpWnkI4rPtaLdQZAYTMlktbl7BaLqqbNspdEnPDf9xIIiaAcfYIWGrh/SITlQ+ievIN/e9YVyJ7Al3LLl/HdJpt5FXfA2PJbTvsiWY60avcfSMAD9xoIf6H5MhbGOcO+vrGqHRnGgQyHlQ=
  - secure: O7Ypjawv5TRVZGj61ABV3/NAPHhzSUF3QO7/7MPZUqVfB0GTpl4QvVv8ohoW9nRe3AB1PLqq7qK9BJ71tC8shaZ9zA9ywYc+O1k8PN1foeRlHk3hITKdLXl9/EejaBg9c9Juh3YwH0mU1i0Y8GKKbCs1MYsRMZlrIAOYskJ+sibRzrbRJ2EJwaPT6UkOJqQ/p/UD9WCVVx4Nrd+gmpabkohJ4MIkAW/uReN0QbNKP79bJW0jARhwg8LB/bFYikSmFRB4srEM9RZ+GOHU7aypqJ9HqTHt0yfZWob1cYPebF5NMpUy+vrXSu/f8TvbPqLY7/aLazq8IQcHnkmrNd4wBMWABpMibzKZjj/mXKbL+Ps6v3Bpk3T/7WI5xrrh2enbRTEiaWwLB+IArdBnlPzooHQEJXDY+iyAlwkutSYDg9fPQX3lKA5JaDgNL+DaXVTJ53lMk+ugjgQqS9fzYUSth2bgZhErxq48GqInU6UjTqHars3mTtMML2E09wTKUVPJpN9a9SFgd4OKAu5G6fF4w3U2uGZx8AcKIj2TyDOw/FK0NUy1dNtLsTsNci53VtM4x+dDWwKCDYSMp8P+INoo4nBoqbAud6p5RZ+/uuawGdgmQWjF/hcyTBYYPYQnLWFigHwp9zskRg6V2HCi2jrhfsbllxO8x0OZ4BFCnYc0aGc=
